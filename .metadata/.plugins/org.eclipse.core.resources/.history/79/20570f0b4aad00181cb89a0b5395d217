package EasyTranslate;

import java.awt.HeadlessException;
import java.awt.Toolkit;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.io.IOException;

public class GetClipboardText extends Thread {
	private String txt1 = "";
	JSONConfig config = new JSONConfig();
	public void run() {
//		String path = System.clearProperty("user.name").toString();
//		String path_java = path.replace('\\', '/');
		String path_java = "tranp";
		System.out.println(path_java);

		while (true) {
			String temp = "";
			try {
				temp = (String) Toolkit.getDefaultToolkit().getSystemClipboard().getData(DataFlavor.stringFlavor);
			} catch (HeadlessException e) {
				e.printStackTrace();
			} catch (UnsupportedFlavorException e) {
				e.printStackTrace();
			} catch (IOException e) {
				e.printStackTrace();
			}

			if (txt1.equals(temp) == false) {
				txt1 = temp;
				if(config.getOS().equals("Windows")) {
					System.out.println(config.getOS());
					WindowsNotification notif = new WindowsNotification(txt1, path_java);
					notif.start();
				}
//				else if (config.getOS().equals("Linux")) {
//					LinuxNotification notif = new LinuxNotification(txt1, path_java);
//					notif.start();
//				}
				
			}
			try {
				Thread.sleep(1000);
			} catch (InterruptedException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}
	}
}
